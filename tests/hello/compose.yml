version: '3.9'

services:
  hello:
    image: mendhak/http-https-echo:31
    container_name: hello
    environment: 
        - HTTP_PORT=8888
    ports:
        - 8888:8888
    networks:
      - internal
    logging:
      driver: fluentd
      options:
        fluentd-address: 127.0.0.1:24224
        fluentd-async-connect: "true"
        tag: service.hello
    labels:
      # caddy: hello.dev.vasandani.me
      # caddy.tls: internal
      caddy: hello.elseajay.xyz
      caddy.tls.dns: cloudflare ${CLOUDFLARE_API_TOKEN}
      caddy.reverse_proxy: "{{ upstreams 8888 }}"

